<% include ../partials/header %>
<% include ../partials/navbar %>

<main>
<div id="user-profile" class="container mt-0 mt-sm-4">
    
    <% if (user.settings.profileVisibility === 'public' || (currentUser && currentUser._id.equals(user._id))) { %>

    <div class="row">
        <div id="profile-header" class="col-12 container-fluid">
            <div class="row justify-content-center">
                <div class="col-lg-12 image-container mt-0 px-0">
                    <img src="<%= user.image %>">
                    <h1 class="display-4 image-overlay-bottom d-block w-100 mb-0  pb-2 pt-5 text-center"><%= user.username %></h1> 
                </div>
          
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-12 pb-3 px-0">
            <div class="list-group list-group-horizontal rounded-0" id="user-tabs-list" role="tablist">
                <a class="list-group-item list-group-item-action d-flex align-items-center justify-content-center <%= (userTab === 'list-recent') ? 'active': '' %>"
                id="list-recent" data-toggle="list" href="#recent-content" role="tab" aria-controls="list recent activity">
                    <div class="index-icon"></div>
                    <strong class="d-none d-md-inline ml-2">Recent</strong>
                </a>
                <a class="list-group-item list-group-item-action d-flex align-items-center justify-content-center <%= (userTab === 'list-campgrounds') ? 'active': '' %>"
                id="list-campgrounds" data-toggle="list" href="#campgrounds-content" role="tab" aria-controls="list campgrounds">
                    <div class="index-icon"></div>
                    <strong class="d-none d-md-inline ml-2">Campgrounds</strong>
                </a>
                <a class="list-group-item list-group-item-action d-flex align-items-center justify-content-center <%= (userTab === 'list-reviews') ? 'active': '' %>"
                id="list-reviews" data-toggle="list" href="#reviews-content" role="tab" aria-controls="list reviews">
                    <div class="index-icon"></div>                    
                    <strong class="d-none d-md-inline ml-2">Reviews</strong>
                </a>
                <a class="list-group-item list-group-item-action d-flex align-items-center justify-content-center <%= (userTab === 'list-favorites') ? 'active': '' %>"
                id="list-favorites" data-toggle="list" href="#favorites-content" role="tab" aria-controls="list favorites">
                    <div class="index-icon"></div>                    
                    <strong class="d-none d-md-inline ml-2">Favorites</strong>
                </a>
                <% if (currentUser && currentUser._id.equals(user._id)) { %>
                <a class="list-group-item list-group-item-action d-flex align-items-center justify-content-center <%= (userTab === 'list-settings') ? 'active': '' %>"
                id="list-settings" data-toggle="list" href="#settings-content" role="tab" aria-controls="list settings">
                    <div class="index-icon"></div>                    
                    <strong class="d-none d-md-inline ml-2">Settings</strong>
                </a>
                <% } %>
            </div>
        </div>
        <div class="col-md-12 px-0">
            <div class="tab-content" id="user-tabs-content">
                <div class="tab-pane fade <%= (userTab === 'list-recent') ? 'show active': '' %>" id="recent-content" role="tabpanel" aria-labelledby="recent activity"></div>
                <div class="tab-pane fade <%= (userTab === 'list-campgrounds') ? 'show active': '' %>" id="campgrounds-content" role="tabpanel" aria-labelledby="user campgrounds"></div>
                <div class="tab-pane fade <%= (userTab === 'list-reviews') ? 'show active': '' %>" id="reviews-content" role="tabpanel" aria-labelledby="user reviews"></div>
                <div class="tab-pane fade <%= (userTab === 'list-favorites') ? 'show active': '' %>" id="favorites-content" role="tabpanel" aria-labelledby="user favorites"></div>
                <% if (currentUser && currentUser._id.equals(user._id)) { %>
                <div class="tab-pane fade <%= (userTab === 'list-settings') ? 'show active': '' %>" id="settings-content" role="tabpanel" aria-labelledby="user settings"></div>
                <% } %>
            </div>
        </div>
    </div>
    
    <% } else { %>
    
    <div id="lock-screen" class="row justify-content-center align-items-end text-center">
        <div class="col">
            <img class="mb-3" src="/images/icons/icons8-lock.svg" alt="lock icon">
            <h1> This account is private.</h1>
            <button class="back-button btn grey-btn mt-3 mx-auto px-4 font-weight-bold">Go Back</button>
        </div>
    </div>
    
    <% } %>
</div>

</main>

<% include ../partials/login-modal %>
<% include ../partials/footer %>